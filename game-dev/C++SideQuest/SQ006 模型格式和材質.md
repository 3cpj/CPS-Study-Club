# SQ006 模型格式和材質

# OBJ文件
OBJ文件是一種被廣泛使用的3D模型文件格式（obj為後綴名）。由Alias|Wavefront公司為3D建模和動畫軟件"Advanced Visualizer"開發的一種標準，適合用於3D軟件模型之間的互導，也可以通過3dsmax、Maya等建模軟件讀寫。

重點:
- v（vertex）数据段: 模型顶点列表
- vt（vertex texture）数据段：模型顶点的纹理坐标列表
- vn（vertex normal）数据段：顶点法线列表
- f（face）：模型的三角面列表
- 紋理座標 (UV座標)

## OBJ文件格式:
<detail>
```obj
# "#"号开头是注释行
# v（vertex）数据段: 模型顶点列表
# 顶点位置信息，是xyz三维坐标
# v开头的每一行描述一个顶点，行数等于顶点数。8个顶点所以有8行
v  1.00  -1.00  -1.00
v  1.00  1.00  1.00
......
# vt（vertex texture）数据段：模型顶点的纹理坐标列表
# 顶点的纹理坐标信息，是xy二维坐标
# vt开头的每一行描述一个纹理坐标，行数大于等于顶点数，因为一个模型顶点在贴图的UV坐标系中很可能对应多个顶点/纹理坐标。且坐标值范围是在0~1之间，这个模型中有14行。
# 关于纹理坐标，本文不多解释纹理坐标，就是UV座標
vt  0.74  0.75
vt  0.29  0.55
......
# vn（vertex normal）数据段：顶点法线列表
# 三维法向量，xyz
# vn开头的每一行描述一个法向量，行数大于等于顶点数。 前面介绍了，法线是与面相关的概念，但是现在的面是靠顶点来描述，拿点"1"为例，它与参与构成了三个面，所以"顶点1"对应有3条法线
# 可能你已经发现了，在这个立方体模型中，共面顶点的法向量的方向是相同的，也就是说这里面的数据会重复，所以在建模软件导出obj文件时有个优化的选项，勾选后的导出的法线列表数据中就不会有重复项，这里的例子优化后有6条法线*
vn  -1.00 0.00 0.00 
vn  1.00 0.00 0.00
vn  0.00 1.00 0.00
......
# f（face）：模型的三角面列表
# f开头的每一行描述一个面 ，关键的来了，三个点组成一个面，怎样拿到这三个点呢？通过从1开始的索引，去前面的v、vt、vn列表中去取。
# 总结一下就是：每一行定义1个面，1个面包含3个点，1个点具有“顶点/纹理坐标/法线”3个索引值，索引的是前面3个列表的信息。
f  1/1/1  2/2/1  3/3/1      # 顶点1、顶点2、顶点3 组成的面
f  2/2/1  3/3/1  4/4/1      # 顶点2、顶点3、顶点4 组成的面
f  1/1/1  5/10/1  8/14/6  # 顶点1、顶点5、顶点8 组成的面
......
```
以上便是obj 文件的核心部分，此外還有一些數據段，記錄如下。

o 對象名
g 組名
s 平滑組
usemtl 材質名
mtllib 材質庫.mtl

由於Obj文件和mtl文件是息息相關的，這裡留下mtl文件格式供你自行研究

* [更加詳細mtl文件格式](https://www.loc.gov/preservation/digital/formats/fdd/fdd000508.shtml)

在model/文件下存放著一些obj格式文件(~~找了很久卻網上沒有的模型~~)，你也可以參考一下!

</details>

# FBX格式
和OBJ格式差不多，可以儲存更多類型的信息，比如動畫、材質特性、貼圖、骨骼動畫、燈光、攝像機，頂點顏色等，是更加通用的文件格式

# 材質
在現實世界中不存在完美的表面，一個模型能攜帶的法線也有限。因此可以使用漫反射，高光，折射等計算去調整法線，也就能影響光照計算的結果

# 反射光
在現實世界中，每個物體都會對光產生不同的反應，例如:
- 有些物體反射光的時候不會產生太多的散射(Scatter)，而是產生一個較小的高光點
- 有些物體則散射較多，產生一個更大半徑的高光點

# 反射光類型
- 漫反射: 將入射光線均勻地反射出去 (Lambertian 模型)
- 鏡面反射: 將入射光線根據表面法線進行反射，且只有在反射方向有能量，其他方向能量則為0
- 折射: 根據折射率折射一部分光線進入物體之中
- 粗糙鏡面反射: 光線偏移較小，反射集中於一個區域內
- 粗糙鏡面折射: 光線偏移較小，反射和折射集中於一個區域內
- 多層材質: 多個物體反射(表面一層)出來的投影
- 次表面散射: 在半透明的物體內多次反射，多出現於半透明的物體 (玉石，牛奶，皮膚(通常有三層))

# 頂點色

# 光滑組

# 光滑組和法線

# 紋理動畫
在採樣紋理的時候，可以嘗試把紋理的圖片UV座標平移，達到產生複雜動畫的錯覺

# 備忘




